<!-- <script src="https://d3js.org/d3.v4.min.js"></script> -->
<script src="http://d3js.org/d3.v3.min.js" type="text/javascript"></script>
<script src="assets/js/newick.js"></script>
<script src="assets/js/d3.phylogram.js"></script>

<script>
  function load() {
    let bestTree = '((((((388:2)384:3,401:8)358:3,(386:3)363:4,(((399:2,402:2)395:1,(((421:1,((462:2,((492:2,(527:6)502:5)482:4)469:3)454:6)427:3,429:4)411:1,((((((486:5)461:2)448:1,(((484:2,(((531:5)510:4)494:2,((519:3,525:5)508:1,521:5)501:4,((516:1)512:1)507:5,((532:1)530:5)509:6)488:3,497:6)475:2)466:2)457:2,(485:5)463:3)443:2)439:2)428:3)418:2,((455:2)440:2)431:6)404:1)397:2)392:2)382:6,(391:1)387:7)346:1,383:7)345:2,(394:7)352:5,(362:0,(380:1)376:2,379:3)354:6)332:2)325';
    console.log(bestTree);
    var newick = Newick.parse(bestTree);
    var newickNodes = [];
    function buildNewickNodes(node, callback) {
      newickNodes.push(node);

      if (node.branchset) {
        for (var i=0; i < node.branchset.length; i++) {
          buildNewickNodes(node.branchset[i]);
        }
      }
    }
    buildNewickNodes(newick);

    d3.phylogram.build('#phylogram', newick, {
      width: 300,
      height: 400
    });
  }
</script>

<style type="text/css" media="screen">
  body { font-family: "Helvetica Neue", Helvetica, sans-serif; }
  td { vertical-align: top; }
</style>

<body onload="load()">
  <table>
    <tr>
      <td>
        <h2>Phylogram</h2>
        <div id='phylogram'></div>
      </td>
    </tr>
  </table>
</body>
